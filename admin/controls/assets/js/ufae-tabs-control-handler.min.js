!function($){jQuery(window).on("elementor:init",(function(){class TabClickHandler{constructor(){this.iframe=document.getElementById("elementor-preview-iframe"),this.iframeDocument=this.iframe.contentDocument||this.iframe.contentWindow.document,this.selectedTab={}}handleTabClick(e){this.selectedTab=e.target;const repeaterField=e.target.closest(".elementor-repeater-fields-wrapper"),activeFlipBox=this.getActiveFlipBox();jQuery(activeFlipBox).find(".ufae-flipbox-item").removeClass("ufae-repeater-active"),this.iframeDocument&&(repeaterField?this.handleRepeaterField(repeaterField):"Back"===e.target.innerText?this.handleActiveFlipBox(!0):this.handleActiveFlipBox(!1))}repeaterSectionTab(e){document.querySelectorAll(".elementor-repeater-row-tools").forEach((ele,index)=>{ele.dataset.ufaeEventAttached||(ele.addEventListener("click",e=>{this.repeaterSectionTabHandler(e,index)}),ele.dataset.ufaeEventAttached="true")})}repeaterSectionTabHandler(e,index){const targetElement=e.target.closest(".elementor-repeater-fields")||e.target,activeTab=targetElement.querySelector('.elementor-repeater-row-controls:not(.editable) .e-tab-active[class*="elementor-control-ufae_"]'),activeFlipBox=this.getActiveFlipBox();if(activeFlipBox&&(jQuery(activeFlipBox).removeAttr("data-ufae-active-repeater").find(".ufae-flipbox-inner").removeClass("ufae-active-flipbox"),jQuery(activeFlipBox).find(".ufae-flipbox-item").removeClass("ufae-repeater-active")),activeTab){this.selectedTab=activeTab.querySelector(".elementor-panel-tab-heading");const activeSide=activeTab.innerText.trim().toLowerCase();"back"===activeSide&&this.updateFlipboxAttribute(index)}}updateFlipboxAttribute=index=>{this.toggleFlipBoxState(index)};handleRepeaterField(repeaterField){const repeaterFieldItems=repeaterField.querySelectorAll(".elementor-repeater-fields"),totalRepeater=repeaterFieldItems.length;for(let i=0;i<totalRepeater;i++){const activeIndex=this.getActiveIndex(repeaterFieldItems,i,totalRepeater),activeFlipBox=this.getActiveFlipBox();!1!==activeIndex&&this.toggleFlipBoxState(activeIndex)}}getActiveIndex(repeaterFieldItems,currentIndex,totalRepeater){const activeRepeaterStart=repeaterFieldItems[currentIndex].querySelector(".elementor-repeater-row-controls.editable"),activeRepeaterEnd=repeaterFieldItems[totalRepeater-1].querySelector(".elementor-repeater-row-controls.editable");return activeRepeaterStart?currentIndex:!!activeRepeaterEnd&&totalRepeater-1}getActiveFlipBox(){const iframeBody=this.iframeDocument.activeElement;return!!iframeBody&&iframeBody.querySelector(".elementor-element.elementor-element-edit-mode.elementor-widget.elementor-widget-ufae_flipbox_widget.elementor-element-editable")}toggleFlipBoxState(activeIndex){const activeFlipBox=this.getActiveFlipBox();if(activeFlipBox){const allFlipBox=activeFlipBox.querySelectorAll(".ufae-flipbox-item"),innerFlipBox=allFlipBox[activeIndex].querySelector(".ufae-flipbox-inner");if(innerFlipBox){const side=this.selectedTab.innerText.trim();innerFlipBox.classList.toggle("ufae-active-flipbox","Back"===side),"Back"===side?this.addRepeaterDataAttr(activeIndex):activeFlipBox.removeAttribute("data-ufae-active-repeater")}}}addRepeaterDataAttr(index){const activeFlipBox=this.getActiveFlipBox(),activeFlipBoxItem=jQuery(activeFlipBox).find(".ufae-flipbox-item")[index];if(activeFlipBoxItem){const activeFlipBoxItemIdMatch=activeFlipBoxItem.className.match(/elementor-repeater-item-(\w+)/);activeFlipBoxItemIdMatch&&jQuery(activeFlipBox).attr("data-ufae-active-repeater",activeFlipBoxItemIdMatch[1])}}handleActiveFlipBox(status){const activeFlipBox=this.getActiveFlipBox();activeFlipBox&&jQuery(activeFlipBox).toggleClass("ufae-active-flipbox",status)}tabDestroyHandler(){const iframeBody=this.iframeDocument.activeElement,flipBoxes=!!iframeBody&&jQuery(iframeBody).find(".elementor-element.elementor-element-edit-mode.elementor-widget.elementor-widget-ufae_flipbox_widget");flipBoxes&&flipBoxes.length>0&&(flipBoxes.find(".ufae-flipbox-inner").removeClass("ufae-active-flipbox"),flipBoxes.removeAttr("data-ufae-active-repeater").removeClass("ufae-active-flipbox"))}}const tabsClickEvent=$el=>{setTimeout(()=>{const repeaterField=$el.closest(".elementor-repeater-fields"),tabClickHandler=new TabClickHandler;$el.find(".elementor-panel-tab-heading").each((_,tab)=>{tab.addEventListener("click",e=>tabClickHandler.handleTabClick(e))}),repeaterField&&tabClickHandler.repeaterSectionTab()})},tab_render=elementor.modules.controls.BaseData.extend({onRender:data=>{const classList=Array.from(data.$el[0].classList),hasFlipboxClass=classList.some(className=>className.startsWith("elementor-control-ufae_flipbox_"));hasFlipboxClass&&tabsClickEvent(data.$el)},onDestroy:function(){const classList=Array.from(this.$el[0].classList),hasFlipboxClass=classList.some(className=>className.startsWith("elementor-control-ufae_flipbox_"));if(hasFlipboxClass){const tabClickHandler=new TabClickHandler;tabClickHandler.tabDestroyHandler()}}});elementor.addControlView("tabs",tab_render)}))}(jQuery);